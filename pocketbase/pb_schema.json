{
  "collections": [
    {
      "name": "products",
      "type": "base",
      "system": false,
      "schema": [
        {
          "name": "name",
          "type": "text",
          "required": true,
          "options": {
            "min": 2,
            "max": 200
          }
        },
        {
          "name": "slug",
          "type": "text",
          "required": true,
          "options": {
            "min": 2,
            "max": 200,
            "pattern": "^[a-z0-9-]+$"
          }
        },
        {
          "name": "description",
          "type": "editor",
          "required": true
        },
        {
          "name": "shortDescription",
          "type": "text",
          "required": true,
          "options": {
            "max": 500
          }
        },
        {
          "name": "price",
          "type": "number",
          "required": true,
          "options": {
            "min": 0
          }
        },
        {
          "name": "compareAtPrice",
          "type": "number",
          "required": false,
          "options": {
            "min": 0
          }
        },
        {
          "name": "category",
          "type": "select",
          "required": true,
          "options": {
            "values": ["men", "women", "accessories"]
          }
        },
        {
          "name": "subcategory",
          "type": "text",
          "required": true
        },
        {
          "name": "images",
          "type": "file",
          "required": false,
          "options": {
            "maxSelect": 10,
            "maxSize": 5242880,
            "mimeTypes": ["image/jpeg", "image/png", "image/webp", "image/avif"],
            "thumbs": ["100x100", "300x300", "600x600"]
          }
        },
        {
          "name": "colors",
          "type": "json",
          "required": false
        },
        {
          "name": "sizes",
          "type": "json",
          "required": false
        },
        {
          "name": "tags",
          "type": "json",
          "required": false
        },
        {
          "name": "featured",
          "type": "bool",
          "required": false
        },
        {
          "name": "inStock",
          "type": "bool",
          "required": false
        },
        {
          "name": "stockQuantity",
          "type": "number",
          "required": false,
          "options": {
            "min": 0
          }
        },
        {
          "name": "sku",
          "type": "text",
          "required": true,
          "options": {
            "min": 1,
            "max": 50
          }
        },
        {
          "name": "weight",
          "type": "number",
          "required": false
        },
        {
          "name": "dimensions",
          "type": "text",
          "required": false
        },
        {
          "name": "similarProducts",
          "type": "relation",
          "required": false,
          "options": {
            "collectionId": "products",
            "cascadeDelete": false,
            "maxSelect": 10
          }
        }
      ],
      "indexes": [
        "CREATE UNIQUE INDEX idx_products_slug ON products (slug)",
        "CREATE INDEX idx_products_category ON products (category)",
        "CREATE INDEX idx_products_featured ON products (featured)"
      ],
      "listRule": "",
      "viewRule": "",
      "createRule": "@request.auth.collectionName = 'admins'",
      "updateRule": "@request.auth.collectionName = 'admins'",
      "deleteRule": "@request.auth.collectionName = 'admins'"
    },
    {
      "name": "users",
      "type": "auth",
      "system": false,
      "schema": [
        {
          "name": "name",
          "type": "text",
          "required": true,
          "options": {
            "min": 2,
            "max": 100
          }
        },
        {
          "name": "avatar",
          "type": "file",
          "required": false,
          "options": {
            "maxSelect": 1,
            "maxSize": 2097152,
            "mimeTypes": ["image/jpeg", "image/png", "image/webp"]
          }
        }
      ],
      "listRule": "@request.auth.id != ''",
      "viewRule": "@request.auth.id = id",
      "createRule": "",
      "updateRule": "@request.auth.id = id",
      "deleteRule": "@request.auth.id = id",
      "options": {
        "allowEmailAuth": true,
        "allowOAuth2Auth": true,
        "allowUsernameAuth": false,
        "exceptEmailDomains": [],
        "manageRule": null,
        "minPasswordLength": 8,
        "onlyEmailDomains": [],
        "requireEmail": true
      }
    },
    {
      "name": "admins",
      "type": "auth",
      "system": false,
      "schema": [
        {
          "name": "name",
          "type": "text",
          "required": true,
          "options": {
            "min": 2,
            "max": 100
          }
        }
      ],
      "listRule": "@request.auth.collectionName = 'admins'",
      "viewRule": "@request.auth.collectionName = 'admins'",
      "createRule": null,
      "updateRule": "@request.auth.id = id",
      "deleteRule": null,
      "options": {
        "allowEmailAuth": true,
        "allowOAuth2Auth": false,
        "allowUsernameAuth": false,
        "exceptEmailDomains": [],
        "manageRule": null,
        "minPasswordLength": 12,
        "onlyEmailDomains": [],
        "requireEmail": true
      }
    },
    {
      "name": "carts",
      "type": "base",
      "system": false,
      "schema": [
        {
          "name": "user",
          "type": "relation",
          "required": true,
          "options": {
            "collectionId": "users",
            "cascadeDelete": true,
            "maxSelect": 1
          }
        },
        {
          "name": "items",
          "type": "json",
          "required": true
        }
      ],
      "indexes": [
        "CREATE UNIQUE INDEX idx_carts_user ON carts (user)"
      ],
      "listRule": "@request.auth.id = user",
      "viewRule": "@request.auth.id = user",
      "createRule": "@request.auth.id != ''",
      "updateRule": "@request.auth.id = user",
      "deleteRule": "@request.auth.id = user"
    },
    {
      "name": "orders",
      "type": "base",
      "system": false,
      "schema": [
        {
          "name": "orderId",
          "type": "text",
          "required": true,
          "options": {
            "min": 5,
            "max": 50
          }
        },
        {
          "name": "user",
          "type": "relation",
          "required": false,
          "options": {
            "collectionId": "users",
            "cascadeDelete": false,
            "maxSelect": 1
          }
        },
        {
          "name": "email",
          "type": "email",
          "required": true
        },
        {
          "name": "items",
          "type": "json",
          "required": true
        },
        {
          "name": "subtotal",
          "type": "number",
          "required": true,
          "options": {
            "min": 0
          }
        },
        {
          "name": "shipping",
          "type": "number",
          "required": true,
          "options": {
            "min": 0
          }
        },
        {
          "name": "tax",
          "type": "number",
          "required": true,
          "options": {
            "min": 0
          }
        },
        {
          "name": "total",
          "type": "number",
          "required": true,
          "options": {
            "min": 0
          }
        },
        {
          "name": "status",
          "type": "select",
          "required": true,
          "options": {
            "values": ["pending", "processing", "shipped", "delivered", "cancelled"]
          }
        },
        {
          "name": "paymentStatus",
          "type": "select",
          "required": true,
          "options": {
            "values": ["pending", "paid", "failed", "refunded", "partial"]
          }
        },
        {
          "name": "paymentIntentId",
          "type": "text",
          "required": false
        },
        {
          "name": "shippingAddress",
          "type": "json",
          "required": true
        },
        {
          "name": "billingAddress",
          "type": "json",
          "required": false
        },
        {
          "name": "notes",
          "type": "text",
          "required": false,
          "options": {
            "max": 1000
          }
        }
      ],
      "indexes": [
        "CREATE UNIQUE INDEX idx_orders_orderId ON orders (orderId)",
        "CREATE INDEX idx_orders_user ON orders (user)",
        "CREATE INDEX idx_orders_status ON orders (status)"
      ],
      "listRule": "@request.auth.id = user || @request.auth.collectionName = 'admins'",
      "viewRule": "@request.auth.id = user || @request.auth.collectionName = 'admins'",
      "createRule": "",
      "updateRule": "@request.auth.collectionName = 'admins'",
      "deleteRule": "@request.auth.collectionName = 'admins'"
    }
  ]
}
